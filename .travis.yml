language: node_js
node_js:
- '0.10'
before_install:
- git submodule update --init --recursive
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm install -g -q protractor supervisor gulp
script:
- webdriver-manager update
- webdriver-manager start &
- npm start &
- sleep 5
- npm test
deploy:
  provider: heroku
  api_key:
    secure: mWzYJHRD0QFoRHTGa0mKo/UeVOE1tc7tAKCmoo/TWAcahFJvrbub5FHLgkBARC+kfqg6EEO3mlUHv48dTA9yR51/pQjOE7XTOD7KFniaNGDwW5XDZn1o+ib/cVjIt7empVMuUzvM7g4MQZnpgX9ZZZCjh0BSUaQBiHicWLBZNSQ=
  app: drewmiller-net
  on:
    repo: itsdrewmiller/drewmiller.net
